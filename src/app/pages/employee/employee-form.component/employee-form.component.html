<h2>Formulário de Colaborador</h2>
<form [formGroup]="employeeGroup">
  <mat-tab-group fitInkBarToContent>
    <mat-tab label="Dados Pessoais">

      <mat-card appearance="outlined" formGroupName="people">
        <mat-card-header>
          <mat-card-title class="header-register-employee">Dados do Colaborador</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field id="input-employee-name" appearance="outline">
            <mat-label>Nome</mat-label>
            <input required matInput placeholder="Antonio josé" formControlName="name" />
          </mat-form-field>
          <mat-form-field id="input-employee-cpf" appearance="outline">
            <mat-label>CPF</mat-label>
            <input required matInput placeholder="111.111.111-11" mask="000.000.000-00" formControlName="cpf" />
          </mat-form-field>
          <mat-form-field id="input-employee-dob" appearance="outline">
            <mat-label>Data de nascimento</mat-label>
            <input matInput [matDatepicker]="dob" formControlName="dob">
            <mat-datepicker-toggle matIconSuffix [for]="dob"></mat-datepicker-toggle>
            <mat-datepicker #dob></mat-datepicker>
          </mat-form-field>
        </mat-card-content>
      </mat-card>

    <mat-card appearance="outlined" formGroupName="contact">
        <mat-card-header>
          <mat-card-title class="header-register-employee">Dados de contato</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field id="input-employee-phone" appearance="outline">
            <mat-label>Telefone</mat-label>
            <input required matInput placeholder="(85) 98585-8585" mask="(00) 00000-0000" formControlName="phone" />
          </mat-form-field>
          <mat-form-field id="input-employee-alternatePhone" appearance="outline">
            <mat-label>Telefone alternativo</mat-label>
            <input required matInput placeholder="(85) 98585-8585" mask="(00) 00000-0000" formControlName="alternatePhone" />
          </mat-form-field>
            <mat-form-field id="input-employee-email" appearance="outline">
            <mat-label>E-mail</mat-label>
            <input required matInput placeholder="jose@gmail.com" type="email" formControlName="email" />
          </mat-form-field>
        </mat-card-content>
      </mat-card>

    <mat-card appearance="outlined" formGroupName="address">
        <mat-card-header>
          <mat-card-title class="header-register-employee">Dados de endereço</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field id="input-employee-address-zip" appearance="outline">
            <mat-label>Cep</mat-label>
            <input required matInput placeholder="60.000-000" mask="00.000-000" formControlName="zip" />
          </mat-form-field>
          <mat-form-field id="input-employee-address-street" appearance="outline">
            <mat-label>Rua</mat-label>
            <input required matInput placeholder="Rua dos anjos" formControlName="street" />
          </mat-form-field>
            <mat-form-field id="input-employee-address-number" appearance="outline">
            <mat-label>Número</mat-label>
            <input required matInput placeholder="402" type="number" formControlName="number" />
          </mat-form-field>
          <mat-form-field id="input-employee-address-complement" appearance="outline">
            <mat-label>Complemento</mat-label>
            <input required matInput placeholder="casa 10" formControlName="complement" />
          </mat-form-field>
        <mat-form-field id="input-employee-address-neighborhood" appearance="outline">
            <mat-label>Bairro</mat-label>
            <input required matInput placeholder="Alvorada" formControlName="neighborhood" />
          </mat-form-field>
            <mat-form-field id="input-employee-address-city" appearance="outline">
            <mat-label>Cidade</mat-label>
            <input required matInput placeholder="Caucaia" formControlName="city" />
          </mat-form-field>
            <mat-form-field id="input-employee-address-state" appearance="outline">
            <mat-label>Estado</mat-label>
            <input required matInput placeholder="Ceará" formControlName="state" />
          </mat-form-field>
        </mat-card-content>
      </mat-card>

    </mat-tab>

    <mat-tab label="Dados do Contrato">
      <mat-card appearance="outlined" formGroupName="employeeContract">
        <mat-card-header>
          <mat-card-title class="header-register-employee">Contrato</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field id="input-employee-contract-type" appearance="outline">
            <mat-label>Tipo de contrato</mat-label>
            <mat-select formControlName="contractType">
                @for(contract of listTypeContract; track contract) {
                    <mat-option [value]="contract">{{ contract.label }}</mat-option>
                }
            </mat-select>
          </mat-form-field>
          <mat-form-field id="input-employee-contract-pis" appearance="outline">
            <mat-label>PIS</mat-label>
            <input required matInput placeholder="1111111111-1" mask="0000000000-0" formControlName="pis" />
          </mat-form-field>
        </mat-card-content>
      </mat-card>

      <div formGroupName="employeeContract">

        <mat-card appearance="outlined" formGroupName="paymentPeople">
          <mat-card-header>
            <mat-card-title class="header-register-employee">Dados de pagamento</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <mat-form-field id="input-employee-paymentPeople-salary" appearance="outline">
              <mat-label>Salário</mat-label>
              <input required matInput placeholder="2.000" formControlName="salary" />
              <span matTextPrefix>R$&nbsp;</span>
            </mat-form-field>
          </mat-card-content>

          <mat-card-header>
            <mat-card-title class="header-register-employee">Dados de banco</mat-card-title>
          </mat-card-header>      
          <mat-card-content formGroupName="bank">
            <mat-form-field id="input-employee-paymentPeople-bankname" appearance="outline">
              <mat-label>Banco</mat-label>
              <input required matInput placeholder="BB" formControlName="bankName" />
            </mat-form-field>
            <mat-form-field id="input-employee-paymentPeople-accountType" appearance="outline">
              <mat-label>Tipo de conta</mat-label>
              <mat-select formControlName="accountType">
                  <mat-option value="Conta-corrente"> Corrente </mat-option>
                  <mat-option value='Conta-poupança'> Poupança </mat-option>
              </mat-select>
            </mat-form-field>
              <mat-form-field id="input-employee-paymentPeople-agency" appearance="outline">
              <mat-label>Agência</mat-label>
              <input required matInput placeholder="3333-3" formControlName="agency" />
            </mat-form-field>
            <mat-form-field id="input-employee-paymentPeople-accountNumber" appearance="outline">
              <mat-label>Conta</mat-label>
              <input required matInput placeholder="123456-7" formControlName="accountNumber" />
            </mat-form-field>
            <mat-form-field id="input-employee-paymentPeople-accountHolderName" appearance="outline">
              <mat-label>Proprietário</mat-label>
              <input required matInput placeholder="Josefina" formControlName="accountHolderName" />
            </mat-form-field>
            <mat-form-field id="input-employee-paymentPeople-taxIdNumber" appearance="outline">
              <mat-label>CPF</mat-label>
              <input required matInput placeholder="111.111.111-11" mask="000.000.000-00" formControlName="taxIdNumber" />
            </mat-form-field>
          </mat-card-content>


          <mat-card-header>
            <mat-card-title class="header-register-employee">Dados de pix</mat-card-title>
          </mat-card-header>
          <mat-card-content formGroupName="pix">
            <mat-form-field id="input-employee-paymentPeople-pixkeyName" appearance="outline">
              <mat-label>Nome da chave</mat-label>
              <input required matInput placeholder="Jose da Silva" formControlName="keyName" />
            </mat-form-field>
            <mat-form-field id="input-employee-paymentPeople-pixkeyValue" appearance="outline">
              <mat-label>Valor da chave</mat-label>
              <input required matInput placeholder="111.111.111-11" formControlName="keyValue" />
            </mat-form-field>
           </mat-card-content>

        </mat-card>
      </div>

  
    </mat-tab>

  <mat-tab label="Compensações">
       <mat-card appearance="outlined">
        <mat-card-header>
          <mat-card-title class="header-register-employee">Benefícios</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field id="input-employee-contract-type" appearance="outline">
            <mat-label>Benefícios</mat-label>
            <mat-select [formControl]="benefitSelected">
                @for(benefit of listBenefitOptions; track benefit) {
                    <mat-option [value]="benefit">{{ benefit.name }}</mat-option>
                }
            </mat-select>
          </mat-form-field>
          <mat-form-field id="input-employee-contract-value" appearance="outline">
            <mat-label>Valor</mat-label>
            <input required matInput placeholder="2000" />
            <span matTextPrefix>R$&nbsp;</span>
          </mat-form-field>
          <mat-card-actions>
            <button mat-raised-button matButton="filled" type="submit" (click)="addBenefit($event)">
              Adicionar
            </button>
          </mat-card-actions>
        </mat-card-content>

          @defer(when listBenefitForContract().length > 0){
              <mat-card-header>
                <mat-card-title class="header-register-employee">Lista de Benefícios</mat-card-title>
              </mat-card-header>
              <mat-card-content style="max-height: 166px; overflow-y: auto;">
                <mat-list>
                  @for(benefit of listBenefitForContract(); track benefit) {
                  <mat-list-item
                    >{{ benefit.name }}
                    <button matIconButton (click)="excludeBenefit($event, benefit)" matListItemMeta>
                      <mat-icon>delete</mat-icon>
                    </button>
                  </mat-list-item>
                  }
                </mat-list>
              </mat-card-content>
            }
      </mat-card>

       <mat-card appearance="outlined">
        <mat-card-header>
          <mat-card-title class="header-register-employee">Encargos</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field id="input-employee-contract-payrolltaxes" appearance="outline">
            <mat-label>Encargos</mat-label>
            <mat-select [formControl]="payrollSelected">
                @for(payroll of listPayrollOptions; track payroll) {
                    <mat-option [value]="payroll">{{ payroll.name }}</mat-option>
                }
            </mat-select>
          </mat-form-field>
          <mat-form-field id="input-employee-contract-employee-value" appearance="outline">
            <mat-label>Valor</mat-label>
            <input required matInput placeholder="2000" />
            <span matTextPrefix>R$&nbsp;</span>
          </mat-form-field>
          <mat-card-actions>
            <button mat-raised-button matButton="filled" type="submit" (click)="addPayroll($event)">
              Adicionar
            </button>
          </mat-card-actions>
        </mat-card-content>

          @defer(when listPayrollForContract().length > 0){
              <mat-card-header>
                <mat-card-title class="header-register-employee">Lista de Benefícios</mat-card-title>
              </mat-card-header>
              <mat-card-content style="max-height: 166px; overflow-y: auto;">
                <mat-list>
                  @for(payroll of listPayrollForContract(); track payroll) {
                  <mat-list-item
                    >{{ payroll.name }}
                    <button matIconButton (click)="excludePayroll($event, payroll)" matListItemMeta>
                      <mat-icon>delete</mat-icon>
                    </button>
                  </mat-list-item>
                  }
                </mat-list>
              </mat-card-content>
            }
      </mat-card>
  </mat-tab>

  <mat-tab label="Periodo do contrato">
      <mat-card appearance="outlined" [formGroup]="termOfContract">
        <mat-card-header>
          <mat-card-title class="header-register-employee">Período do contrato</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field id="input-employee-contract-startdate" appearance="outline">
              <mat-label>Dada de início</mat-label>
            <input matInput [matDatepicker]="startDate" formControlName="startDate">
            <mat-datepicker-toggle matIconSuffix [for]="startDate"></mat-datepicker-toggle>
            <mat-datepicker #startDate></mat-datepicker>
          </mat-form-field>
          <mat-form-field id="input-employee-contract-enddate" appearance="outline">
           <mat-label>Dada de saída</mat-label>
            <input matInput [matDatepicker]="endDate" formControlName="endDate">
            <mat-datepicker-toggle matIconSuffix [for]="endDate"></mat-datepicker-toggle>
            <mat-datepicker #endDate></mat-datepicker>
          </mat-form-field>
        </mat-card-content>
        <mat-card-actions>
          <button mat-raised-button matButton="filled" type="submit" (click)="addTerm($event)">
            Adicionar
          </button>
        </mat-card-actions>
      </mat-card>
      @defer(when listTermForContract().length > 0){
        <mat-card appearance="outlined">
          <mat-card-header>
            <mat-card-title class="header-register-position">Lista de Períodos</mat-card-title>
          </mat-card-header>
          <mat-card-content style="max-height: 166px; overflow-y: auto;">
            <mat-list>
              @for(term of listTermForContract(); track term.startDate) {
              <mat-list-item
                >{{ term.startDate | date: 'dd/MM/yyyy'}} - {{ term.endDate | date: 'dd/MM/yyyy'}}
                <button matIconButton (click)="excludeTerm($event, term)" matListItemMeta>
                  <mat-icon>delete</mat-icon>
                </button>
              </mat-list-item>
              }
            </mat-list>
          </mat-card-content>
        </mat-card>
        }
  </mat-tab>
</mat-tab-group>


  <section>
    <div class="button-redirect-search-employee">
      <button mat-raised-button matButton="outlined" type="submit" (click)="goBack()">
        Voltar
      </button>
      <button mat-raised-button matButton="filled" type="submit">Salvar</button>
    </div>
  </section>
</form>
