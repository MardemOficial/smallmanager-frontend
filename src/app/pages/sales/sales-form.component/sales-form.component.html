<h2>Cadastro de pedido</h2>
<mat-tab-group fitInkBarToContent appearance="outlined">
  <mat-tab label="Em loja">
    <form [formGroup]="orderInStoryForm">
      <section id="pay-info">
        <mat-card id="info" appearance="outlined">
          <mat-card-header>
            <mat-card-subtitle>Pedido: P-01</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <mat-form-field appearance="outline">
              <mat-label>Mesa</mat-label>
              <input required matInput placeholder="01" />
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Status do pedido</mat-label>
              <mat-select>
                @for(salesstatus of salesStatusInStore; track salesstatus) {
                <mat-option [value]="salesstatus">{{ salesStatusLabels[salesstatus] }}</mat-option>
                }
              </mat-select>
            </mat-form-field>
          </mat-card-content>
        </mat-card>

        <mat-card id="pay" appearance="outlined">
          <mat-card-header>
            <mat-card-subtitle>Forma de pagamento</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <mat-form-field appearance="outline">
              <mat-label>Pagamento</mat-label>
              <mat-select>
                @for(paymenttype of paymentType; track paymenttype) {
                <mat-option [value]="paymenttype">{{ paymentTypesLabels[paymenttype] }}</mat-option>
                }
              </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Desconto</mat-label>
              <input type="number" min="0" matInput placeholder="1,50" />
              <span matTextPrefix>R$&nbsp;</span>
            </mat-form-field>
          </mat-card-content>
        </mat-card>
      </section>

      <mat-card appearance="outlined">
        <mat-card-header>
          <mat-card-subtitle>Itens</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field appearance="outline" style="width: 40%">
            <mat-label>Item</mat-label>
            <input matInput placeholder="Churrasco de picanha" />
          </mat-form-field>
          <mat-form-field appearance="outline" style="width: 15%">
            <mat-label>Quantidade</mat-label>
            <input type="number" min="0" matInput placeholder="10" />
          </mat-form-field>
        </mat-card-content>
        <mat-card-actions id="button-form-instore" (click)="addItemInStore($event)">
          <button mat-raised-button matButton="filled" type="submit">Incluir</button>
        </mat-card-actions>
      </mat-card>

      @defer(when listSalesItemInStore().length > 0){
      <mat-card appearance="outlined">
        <mat-card-header>
          <mat-card-subtitle class="header-register">Lista de produtos</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content style="overflow-y: auto">
          <mat-list>
            @for(item of listSalesItemInStore(); track item) {
            <mat-list-item
              >Item: {{ item.product }}: {{ item.quantity }} und
              <button matIconButton (click)="excludeInStore($event, item)" matListItemMeta>
                <mat-icon>delete</mat-icon>
              </button>
            </mat-list-item>
            }
          </mat-list>
        </mat-card-content>
      </mat-card>
      }

      <mat-card appearance="outlined">
        <mat-card-actions>
          <button mat-raised-button matButton="outlined" type="submit" (click)="goBack()">
            Voltar
          </button>
          <button mat-raised-button matButton="filled" type="submit">Salvar</button>
        </mat-card-actions>
      </mat-card>
    </form>
  </mat-tab>
  <mat-tab label="Delivery">
    <form [formGroup]="orderDeliverForm">
      <section id="info-delivery">
        <mat-card id="info-order" appearance="outlined">
          <mat-card-header>
            <mat-card-subtitle>Pedido: D-01</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <mat-form-field appearance="outline">
              <mat-label>Telefone</mat-label>
              <input required matInput placeholder="(85) 98585-8585" mask="(00) 00000-0000" />
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Status do pedido</mat-label>
              <mat-select>
                @for(salesstatus of salesStatus; track salesstatus) {
                <mat-option [value]="salesstatus">{{ salesStatusLabels[salesstatus] }}</mat-option>
                }
              </mat-select>
            </mat-form-field>
          </mat-card-content>
        </mat-card>

        <mat-card id="info-custumer" appearance="outlined">
          <mat-card-header>
            <mat-card-subtitle>Informações do cliente</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
           <p>Maria das graças</p>
           <p>Rua azul marinho, nº 2150, APTO 303 - Aldeota - Fortaleza</p>
          </mat-card-content>
        </mat-card>
      </section>
       <mat-card  appearance="outlined">
          <mat-card-header>
            <mat-card-subtitle>Forma de pagamento</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <mat-form-field appearance="outline">
              <mat-label>Pagamento</mat-label>
              <mat-select>
                @for(paymenttype of paymentType; track paymenttype) {
                <mat-option [value]="paymenttype">{{ paymentTypesLabels[paymenttype] }}</mat-option>
                }
              </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Desconto</mat-label>
              <input type="number" min="0" matInput placeholder="1,50" />
              <span matTextPrefix>R$&nbsp;</span>
            </mat-form-field>
          </mat-card-content>
        </mat-card>

      <mat-card appearance="outlined">
        <mat-card-header>
          <mat-card-subtitle>Itens</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-form-field appearance="outline" style="width: 40%">
            <mat-label>Item</mat-label>
            <input matInput placeholder="Churrasco de picanha" />
          </mat-form-field>
          <mat-form-field appearance="outline" style="width: 15%">
            <mat-label>Quantidade</mat-label>
            <input type="number" min="0" matInput placeholder="10" />
          </mat-form-field>
        </mat-card-content>
        <mat-card-actions id="button-form-delivery" (click)="addDelivery($event)">
          <button mat-raised-button matButton="filled" type="submit">Incluir</button>
        </mat-card-actions>
      </mat-card>

      @defer(when listSalesItemDelivery().length > 0){
      <mat-card appearance="outlined">
        <mat-card-header>
          <mat-card-subtitle class="header-register">Lista de produtos</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content style="overflow-y: auto">
          <mat-list>
            @for(itemdelivery of listSalesItemDelivery(); track itemdelivery) {
            <mat-list-item
              >Item: {{ itemdelivery.product }}: {{ itemdelivery.quantity }} und
              <button matIconButton (click)="excludeDelivery($event, itemdelivery)" matListItemMeta>
                <mat-icon>delete</mat-icon>
              </button>
            </mat-list-item>
            }
          </mat-list>
        </mat-card-content>
      </mat-card>
      }

      <mat-card appearance="outlined">
        <mat-card-actions>
          <button mat-raised-button matButton="outlined" type="submit" (click)="goBack()">
            Voltar
          </button>
          <button mat-raised-button matButton="filled" type="submit">Salvar</button>
        </mat-card-actions>
      </mat-card>
    </form>
  </mat-tab>
</mat-tab-group>
